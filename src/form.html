<html>

<body>
    <script type="text/javascript">

        function parseString(input) {
            // Remove whitespace and commas from the string
            const cleanedString = input.replace(/[\s,]/g, '');

            // Extract the first alphabetical letter and the length of the cleaned string
            const firstLetter = cleanedString.charAt(0);
            const length = cleanedString.length;

            return { firstLetter, length };
        }

        function hexToRGBA(hex, alpha) {
            const r = parseInt(hex.substring(1, 3), 16);
            const g = parseInt(hex.substring(3, 5), 16);
            const b = parseInt(hex.substring(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        function GenerateShowsReport(e) {
            let GenerateShowsName = document.getElementById("GenerateShowsName").value;
            let adminpass3 = document.getElementById("adminpass3").value;

            let payload = {
                "venueName": GenerateShowsName,
                "adminPassword": adminpass3,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/generateShowsReport", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json()) // Parse the JSON from the response
                .then(data => {
                    if (data.statusCode === 200) {
                        document.getElementById("Error11").textContent = '';
                        let reportData = JSON.parse(data.body); // Parse the body to get the report data

                        // Iterate over each venue
                        for (let venue in reportData) {
                            let venueDiv = document.createElement('div');
                            venueDiv.style.border = '1px solid #ddd'; // Style the venue div
                            venueDiv.style.padding = '10px';
                            venueDiv.style.marginBottom = '10px';

                            let venueTitle = document.createElement('h2');
                            venueTitle.textContent = venue;
                            venueDiv.appendChild(venueTitle);

                            // Iterate over shows in each venue
                            reportData[venue].forEach(show => {
                                let showDiv = document.createElement('div');
                                showDiv.style.border = '1px solid #ccc'; // Style the show div
                                showDiv.style.padding = '5px';
                                showDiv.style.marginBottom = '5px';

                                let title = document.createElement('h3');
                                title.textContent = show.showName;
                                showDiv.appendChild(title);

                                let proceedings = document.createElement('p');
                                proceedings.textContent = "Proceedings: $" + show.proceedings.toFixed(2);
                                showDiv.appendChild(proceedings);

                                let remainingSeats = document.createElement('p');
                                remainingSeats.textContent = "Remaining Seats: " + show.remainingSeats;
                                showDiv.appendChild(remainingSeats);

                                let soldSeats = document.createElement('p');
                                soldSeats.textContent = "Sold Seats: " + show.soldSeats;
                                showDiv.appendChild(soldSeats);

                                // Append the show div to the venue div
                                venueDiv.appendChild(showDiv);
                            });

                            // Append the venue div to the SearchResults element
                            document.getElementById("Error11").appendChild(venueDiv);
                        }

                    } else {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error11").textContent = errorMessage;
                    }
                })
                .catch(error => {
                    document.getElementById("Error11").textContent = "Network error: " + error.message;
                });

            document.getElementById("GenerateShowsName").value = '';
            document.getElementById("adminpass3").value = '';
        }


        function VMGenerateShowsReport(e) {
            let venuegeneratename = document.getElementById("venuegeneratename").value;
            let managerpass6 = document.getElementById("managerpass6").value;

            let payload = {
                "venueName": venuegeneratename,
                "managerPassword": managerpass6,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/vmGeneratesShowsReport", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json()) // Parse the JSON from the response
                .then(data => {
                    if (data.statusCode === 200) {
                        document.getElementById("Error12").textContent = '';
                        let reportData = JSON.parse(data.body); // Parse the body to get the report data

                        // Iterate over each venue
                        for (let venue in reportData) {
                            let venueDiv = document.createElement('div');
                            venueDiv.style.border = '1px solid #ddd'; // Style the venue div
                            venueDiv.style.padding = '10px';
                            venueDiv.style.marginBottom = '10px';

                            let venueTitle = document.createElement('h2');
                            venueTitle.textContent = venue;
                            venueDiv.appendChild(venueTitle);

                            // Iterate over shows in each venue
                            reportData[venue].forEach(show => {
                                let showDiv = document.createElement('div');
                                showDiv.style.border = '1px solid #ccc'; // Style the show div
                                showDiv.style.padding = '5px';
                                showDiv.style.marginBottom = '5px';

                                let title = document.createElement('h3');
                                title.textContent = show.showName;
                                showDiv.appendChild(title);

                                let proceedings = document.createElement('p');
                                proceedings.textContent = "Proceedings: $" + show.proceedings.toFixed(2);
                                showDiv.appendChild(proceedings);

                                let active = document.createElement('a');
                                let activity = null;
                                if (show.active === 1) {
                                    activity = true;
                                } else {
                                    activity = false;
                                }
                                active.textContent = "Status: " + activity;
                                showDiv.appendChild(active);

                                let remainingSeats = document.createElement('p');
                                remainingSeats.textContent = "Remaining Seats: " + show.remainingSeats;
                                showDiv.appendChild(remainingSeats);

                                let soldSeats = document.createElement('p');
                                soldSeats.textContent = "Sold Seats: " + show.soldSeats;
                                showDiv.appendChild(soldSeats);

                                // Append the show div to the venue div
                                venueDiv.appendChild(showDiv);
                            });

                            // Append the venue div to the SearchResults element
                            document.getElementById("Error12").appendChild(venueDiv);
                        }

                    } else {
                        document.getElementById("Error12").textContent = '';
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error12").textContent = errorMessage;
                    }
                })
                .catch(error => {
                    document.getElementById("Error12").textContent = "Network error: " + error.message;
                });

            document.getElementById("venuegeneratename").value = '';
            document.getElementById("venuegeneratename").value = '';
        }



        function CreateVenue(e) {
            let venueName = document.getElementById("venuecreatename").value;
            let location = document.getElementById("venuelocation").value;
            let managerPassword = document.getElementById("managerpass").value;
            let endrowcolL = document.getElementById("endrowcolL").value;
            let endrowcolR = document.getElementById("endrowcolR").value;
            let endrowcolC = document.getElementById("endrowcolC").value;

            let payload = {
                "venueName": venueName,
                "location": location,
                "managerPassword": managerPassword,
                "endRowColL": endrowcolL,
                "endRowColR": endrowcolR,
                "endRowColC": endrowcolC,
            };

            let seatsPayload = {
                // this is where I am going to add all seats defined by the section endRowsCols
                // and send them in (maybe using another lambda function that puts seats in the DB?)
            }

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/createVenue", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error2").textContent = errorMessage;
                    } else {
                        document.getElementById("Error2").textContent = "Venue created successfully!";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error2").textContent = "Network error: " + error.message;
                });

            // Clear the input fields after the operation
            document.getElementById("venuecreatename").value = '';
            document.getElementById("venuelocation").value = '';
            document.getElementById("managerpass").value = '';
            document.getElementById("endrowcolL").value = '';
            document.getElementById("endrowcolR").value = '';
            document.getElementById("endrowcolC").value = '';
        }


        function DeleteVenue(e) {
            let venuedeletename = document.getElementById("venuedeletename").value;
            let managerpass2 = document.getElementById("managerpass2").value;

            let payload = {
                "venueName": venuedeletename,
                "managerPassword": managerpass2,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/deleteVenue", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error").textContent = errorMessage;
                    } else {
                        document.getElementById("Error").textContent = "Venue deleted successfully!";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error").textContent = "Network error: " + error.message;
                });

            document.getElementById("venuedeletename").value = '';
            document.getElementById("managerpass2").value = '';
        }

        function DeleteShow(e) {
            let showdeletename = document.getElementById("showdeletename").value;
            let managerpass3 = document.getElementById("managerpass3").value;

            let payload = {
                "showName": showdeletename,
                "managerPassword": managerpass3,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/deleteSeats", {
                method: "POST",
                body: JSON.stringify(payload)
            })

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/deleteShow", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error5").textContent = errorMessage;
                    } else {
                        document.getElementById("Error5").textContent = "Show deleted successfully!";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error5").textContent = "Network error: " + error.message;
                });

            document.getElementById("showdeletename").value = '';
            document.getElementById("managerpass3").value = '';
        }

        function DeleteShowA(e) {
            let deleteshowaname = document.getElementById("deleteshowaname").value;
            let adminpass2 = document.getElementById("adminpass2").value;

            let payload = {
                "showName": deleteshowaname,
                "adminPassword": adminpass2,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/deleteSeats", {
                method: "POST",
                body: JSON.stringify(payload)
            })

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/deleteShowA", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error8").textContent = errorMessage;
                    } else {
                        document.getElementById("Error8").textContent = "Show deleted successfully!";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error8").textContent = "Network error: " + error.message;
                });

            document.getElementById("deleteshowaname").value = '';
            document.getElementById("adminpass2").value = '';
        }

        function ActivateShow(e) {
            let activateshowname = document.getElementById("activateshowname").value;
            let managerpass5 = document.getElementById("managerpass5").value;

            let payload = {
                "showName": activateshowname,
                "managerPassword": managerpass5,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/activateShow", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error7").textContent = errorMessage;
                    } else {
                        document.getElementById("Error7").textContent = "Show activated successfully!";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error7").textContent = "Network error: " + error.message;
                });

            document.getElementById("activateshowname").value = '';
            document.getElementById("managerpass5").value = '';
        }

        function ListVenues(e) {
            let adminpass = document.getElementById("adminpass").value;

            let payload = {
                "adminPassword": adminpass,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/listVenues", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json()) // Parse the JSON from the response
                .then(data => {
                    if (data.statusCode === 200) {
                        document.getElementById("Error3").textContent = '';
                        // Parse the response body
                        let responseBody = JSON.parse(data.body);

                        // Iterate over each venue and its shows
                        for (let venue in responseBody) {
                            // Create a section for each venue
                            let venueSection = document.createElement('div');
                            let venueTitle = document.createElement('h3');
                            venueTitle.textContent = venue + ":";
                            venueSection.appendChild(venueTitle);

                            // Create a list for shows
                            let showsList = document.createElement('ul');
                            showsList.style.listStyleType = 'none'; // Remove bullet points
                            showsList.style.padding = '0'; // Remove default padding

                            responseBody[venue].forEach(show => {
                                let listItem = document.createElement('li');
                                listItem.textContent = show;
                                listItem.style.marginBottom = '10px'; // Space between items
                                showsList.appendChild(listItem);
                            });

                            // Append the shows list to the venue section
                            venueSection.appendChild(showsList);

                            // Append the venue section to the Error3 element
                            document.getElementById("Error3").appendChild(venueSection);
                        }

                    } else {
                        // Clear previous content
                        document.getElementById("Error3").innerHTML = '';

                        // Extract and display the error message
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;
                        document.getElementById("Error3").textContent = errorMessage;
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error3").textContent = "Network error: " + error.message;
                });

            document.getElementById("adminpass").value = '';
        }


        function ListShows(e) {
            let showlistname = document.getElementById("showlistname").value;
            let managerpass4 = document.getElementById("managerpass4").value;

            let payload = {
                "venueName": showlistname,
                "managerPassword": managerpass4,
            };

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/listShows", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json()) // Parse the JSON from the response
                .then(data => {
                    if (data.statusCode === 200) {
                        document.getElementById("Error6").textContent = '';
                        // Parse the shows array from the response body
                        let responseBody = JSON.parse(data.body);
                        let shows = responseBody.shows;

                        // Create a list element
                        let list = document.createElement('ul');
                        list.style.listStyleType = 'none'; // Remove bullet points
                        list.style.padding = '0'; // Remove default padding

                        // Iterate over the shows array and append each show as a list item
                        shows.forEach(show => {
                            let listItem = document.createElement('li');
                            listItem.textContent = show;
                            listItem.style.marginBottom = '10px'; // Space between items
                            list.appendChild(listItem);
                        });

                        // Append the list to the Error6 element
                        document.getElementById("Error6").appendChild(list);

                    } else {
                        // Clear previous content
                        document.getElementById("Error6").innerHTML = '';

                        // Parse the shows array from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error6").textContent = errorMessage;

                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error6").textContent = "Network error: " + error.message;
                });

            document.getElementById("showlistname").value = '';
            document.getElementById("managerpass4").value = '';
        }

        function CreateShow(e) {
            let venuenamecreateshow = document.getElementById("venuenamecreateshow").value;
            let showname = document.getElementById("showname").value;
            let date = document.getElementById("date").value;
            let time = document.getElementById("time").value;
            let price = document.getElementById("price").value;
            let showcreatepass = document.getElementById("showcreatepass").value;

            payload = {
                "showName": showname,
                "venueName": venuenamecreateshow,
                "active": 0,
                "proceedings": 0,
                "date": date,
                "time": time,
                "price": price,
                "managerPassword": showcreatepass,
            }

            payload1 = {
                "showName": showname,
                "venueName": venuenamecreateshow,
                "active": 0,
                "proceedings": 0,
                "date": date,
                "time": time,
                "price": price,
                "managerPassword": showcreatepass,
            }

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/fillSeats", {
                method: "POST",
                body: JSON.stringify(payload1)
            }) 
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error41").textContent = "Seat-Creation Error: " + errorMessage;
                    } else {
                        document.getElementById("Error41").textContent = "All seats created successfully.";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error41").textContent = "Network error: " + error.message;
                });

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/createShow", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;

                        // Display the error message
                        document.getElementById("Error4").textContent = errorMessage;
                    } else {
                        document.getElementById("Error4").textContent = "Show created successfully!";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error4").textContent = "Network error: " + error.message;
                });

            // Clear the input fields after the operation
            document.getElementById("venuenamecreateshow").value = '';
            document.getElementById("showname").value = '';
            document.getElementById("date").value = '';
            document.getElementById("time").value = '';
            document.getElementById("price").value = '';
            document.getElementById("showcreatepass").value = '';
        }

        function CreateBlock(e) {
            let showname = document.getElementById("createblockshowname").value;
            let blockname = document.getElementById("createblockname").value;
            let layoutSide = document.getElementById("createblocklayoutsection").value;
            let rows = document.getElementById("createblockrows").value;
            let price = document.getElementById("createblockprice").value;
            let managerpass7 = document.getElementById("managerpass7").value;

            let blocks = [];

            for (let x = 0; x < rows.split(",").length; x++) {
                let row = rows.split(",")[x];
                let block = {
                    "BlockID": 0,
                    "showName": showname,
                    "layoutSide": layoutSide,
                    "row": row,
                    "Price": price
                }
                blocks.push(block);
            }

            payload = {
                "showName": showname,
                "managerPassword": managerpass7,
                "blockName": blockname,
                "blocks": blocks
            }

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/createBlock", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Server error: " + response.status);
                    }
                    return response.json();
                })
                .then(data => {
                    // Check if the response indicates success
                    if (data.statusCode === 200) {
                        document.getElementById("Error13").textContent = "Block created successfully!";
                    }
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = JSON.parse(JSON.parse(data.body).body).Error;

                        // Display the error message
                        document.getElementById("Error13").textContent = errorMessage;
                    }
                })
                .catch(error => {
                    document.getElementById("Error13").textContent = "Error: " + error.message; // Log the specific error message.
                })

            // Clear the input fields after the operation
            document.getElementById("createblockshowname").value = '';
            document.getElementById("createblockname").value = '';
            document.getElementById("createblocklayoutsection").value = '';
            document.getElementById("createblockrows").value = '';
            document.getElementById("createblockprice").value = '';
            document.getElementById("managerpass7").value = '';
        }

        function DeleteBlock(e) {
            let showname = document.getElementById("deleteblockshowname").value;
            let blockname = document.getElementById("deleteblockname").value;
            let managerpass8 = document.getElementById("managerpass8").value;

            payload = {
                "showName": showname,
                "blockName": blockname,
                "managerPassword": managerpass8
            }

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/deleteBlock", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode !== 200) {
                        // Parse the error message from the response body
                        let errorMessage = JSON.parse(data.error.body).Error;

                        // Display the error message
                        document.getElementById("Error9").textContent = errorMessage;
                    } else {
                        document.getElementById("Error9").textContent = "Block deleted successfully!";
                    }
                })
                .catch(error => {
                    // Handle any network errors
                    document.getElementById("Error9").textContent = "Network error: " + error.message;
                    console.log(error);
                });

            // Clear the input fields after the operation
            document.getElementById("deleteblockshowname").value = '';
            document.getElementById("deleteblockname").value = '';
            document.getElementById("managerpass8").value = '';
        }

        function ListBlocks(e) {
            let showname = document.getElementById("listblockshowname").value;
            let managerpass9 = document.getElementById("managerpass9").value;

            payload = {
                "showName": showname,
                "managerPassword": managerpass9
            }

            let colorsList = ['#16A085', '#A569BD', '#FF4BDB', '#3AE215', '#F4D03F', '#E74C3C', '#5DADE2', '#F5B041', '#5B2C6F'];
            let blocks = [];

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/listBlocksPlus", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode === 200) {

                        blocks = data.body;
                        let venue_canvas = document.createElement('div');
                        venue_canvas.style.position = 'relative';
                        venue_canvas.style.height = ((blocks.length + 1) * 25) + 'px';

                        let showtitle = document.createElement('h2');
                        showtitle.textContent = blocks[0].showName;
                        showtitle.style.color = "black";
                        showtitle.style.top = '0%';
                        showtitle.style.position = 'relative';
                        showtitle.style.left = '50%';
                        showtitle.style.transform = 'translateX(-50%)';
                        showtitle.style.textAlign = "center";
                        venue_canvas.appendChild(showtitle);
                        document.getElementById("seatsDisplay_4").appendChild(venue_canvas);

                        for (let x = 0; x < blocks.length; x++) {
                            let label_block = document.createElement('label');
                            label_block.textContent = blocks[x].blockName + "   $" + blocks[x].Price;
                            label_block.style.color = colorsList[x];
                            label_block.style.top = ((x + 2) * 20) + 'px';
                            label_block.style.position = 'absolute';
                            label_block.style.left = '50%';
                            label_block.style.transform = 'translateX(-50%)';
                            label_block.style.textAlign = "center";
                            venue_canvas.appendChild(label_block);

                        }
                        document.getElementById("seatsDisplay_4").appendChild(venue_canvas);
                        document.getElementById("seatsDisplay_4").style.display = "block";
                        document.getElementById("borderID_4").style.display = "block";
                        document.getElementById("formRowID_4").style.display = "block";
                        //}
                    } else {
                        document.getElementById("Error12").textContent = "";
                    }
                })
                .catch(error => {
                    document.getElementById("Error12").textContent = "Network error: " + error.message;
                });

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/showAvailableSeats", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode === 200) {
                        console.log(data.Price[0])

                        if (blocks.length === 0 || !blocks) {
                            let venue_canvas_5 = document.createElement('div');
                            venue_canvas_5.style.position = 'relative';
                            venue_canvas_5.style.height = '50px';

                            let showtitle = document.createElement('h2');
                            showtitle.textContent = data.Price[0].showName + ":  $" + data.Price[0].price;
                            showtitle.style.color = "black";
                            showtitle.style.top = '20px';
                            showtitle.style.position = 'absolute';
                            showtitle.style.left = '50%';
                            showtitle.style.transform = 'translateX(-50%)';
                            showtitle.style.textAlign = "center";
                            venue_canvas_5.appendChild(showtitle);

                            document.getElementById("seatsDisplay_4").appendChild(venue_canvas_5);
                            document.getElementById("seatsDisplay_4").style.display = "block";
                            document.getElementById("borderID_4").style.display = "block";
                            document.getElementById("formRowID_4").style.display = "block";
                        }

                        //document.getElementById("Error10").textContent = "";
                        let availSeats = data.AvailableSeats;
                        let availSeats_2 = new Array(availSeats.length);
                        // Parse the data and prepare it to be sent to the server for file update

                        if (blocks.length === 0 || !blocks) {
                            for (let seat of availSeats) {
                                seat.Price = data.Price[0].price;
                            }
                        } else {
                            for (let seat of availSeats) {
                                for (let x = 0; x < blocks.length; x++) {
                                    // Split seatList into an array of seat rows
                                    let seatListArray = blocks[x].seatList.split(',').map(row => row.trim());

                                    if (seat.layoutSide === blocks[x].layoutSide && seatListArray.includes(seat.row)) {
                                        seat.Price = blocks[x].Price;
                                    }
                                }
                            }
                        }

                        // these are the labels
                        let venue_canvas = document.createElement('div');
                        venue_canvas.style.position = 'relative';

                        let label_l = document.createElement('label');
                        label_l.textContent = "Left Side";
                        label_l.style.position = 'absolute';
                        label_l.style.left = '0px';
                        label_l.style.textAlign = "left";
                        venue_canvas.appendChild(label_l);

                        let label_c = document.createElement('label');
                        label_c.textContent = "Center";
                        label_c.style.position = 'absolute';
                        label_c.style.left = '50%';
                        label_c.style.transform = 'translateX(-50%)';
                        label_c.style.textAlign = "center";
                        venue_canvas.appendChild(label_c);

                        let label_r = document.createElement('label');
                        label_r.textContent = "Right Side";
                        label_r.style.position = 'absolute';
                        label_r.style.right = '0px';
                        label_r.style.textAlign = "right";
                        venue_canvas.appendChild(label_r);

                        document.getElementById("seatsDisplay").appendChild(venue_canvas);
                        document.getElementById("seatsDisplay").style.display = "block";
                        document.getElementById("borderID_1").style.display = "block";
                        document.getElementById("formRowID_1").style.display = "block";
                        // they are separate

                        // VENUE SEATS
                        let venue_canvas_2 = document.createElement('div');
                        venue_canvas_2.style.position = 'relative';
                        let venueSeats = data.Dimentions;

                        let ncL, ncC, ncR, nrT;
                        let match = [];
                        let nr, nc;
                        for (let l = 0; l < 3; l++) {
                            if (l === 0) { // sideLeft
                                match = venueSeats[0].endRowColL.match(/^([A-Z]+)(\d+)$/);

                                if (match) {
                                    nr = parseInt(match[1].charCodeAt(0) - 64); // Letters
                                    nc = parseInt(match[2]); // Numbers
                                }
                                ncL = nc;
                                nrT = nr;
                            } else if (l === 1) { // center
                                match = venueSeats[0].endRowColC.match(/^([A-Z]+)(\d+)$/);

                                if (match) {
                                    nr = parseInt(match[1].charCodeAt(0) - 64); // Letters
                                    nc = parseInt(match[2]); // Numbers
                                }
                                ncC = nc;
                                nrT = Math.max(nr, nrT);
                            } else if (l === 2) { // right
                                match = venueSeats[0].endRowColR.match(/^([A-Z]+)(\d+)$/);

                                if (match) {
                                    nr = parseInt(match[1].charCodeAt(0) - 64); // Letters
                                    nc = parseInt(match[2]); // Numbers
                                }
                                ncR = nc;
                                nrT = Math.max(nr, nrT);
                            }
                        }
                        let seatScale = (50 / ncL + ncC + ncR + 2);
                        for (let l = 0; l < 3; l++) {
                            if (l === 0) {
                                match = venueSeats[0].endRowColL.match(/^([A-Z]+)(\d+)$/);

                                if (match) {
                                    nr = parseInt(match[1].charCodeAt(0) - 64); // Letters
                                    nc = parseInt(match[2]); // Numbers
                                }
                            } else if (l === 1) {
                                match = venueSeats[0].endRowColC.match(/^([A-Z]+)(\d+)$/);

                                if (match) {
                                    nr = parseInt(match[1].charCodeAt(0) - 64); // Letters
                                    nc = parseInt(match[2]); // Numbers
                                }
                            } else if (l === 2) {
                                match = venueSeats[0].endRowColR.match(/^([A-Z]+)(\d+)$/);

                                if (match) {
                                    nr = parseInt(match[1].charCodeAt(0) - 64); // Letters
                                    nc = parseInt(match[2]); // Numbers
                                }
                            }
                            for (let r = 1; r < nr + 1; r++) {
                                for (let c = 1; c < nc + 1; c++) {
                                    let top, left;

                                    if (l === 0) {
                                        top = (seatScale + 5) * r - (seatScale + 5);
                                        left = seatScale * parseInt(c) - (seatScale + 5);
                                    } else if (l === 1) {
                                        top = (seatScale + 5) * r - (seatScale + 5);
                                        left = seatScale * (parseInt(c) + ncL + 1) - (seatScale + 5);
                                    } else if (l === 2) {
                                        top = (seatScale + 5) * r - (seatScale + 5);
                                        left = seatScale * (parseInt(c) + ncL + ncC + 2) - (seatScale + 5);
                                    }
                                    let seat = document.createElement('div');
                                    seat.classList.add("seat");
                                    seat.style.border = '1px solid red';
                                    seat.style.top = top + 'px';
                                    seat.style.left = left + 'px';
                                    seat.style.height = (seatScale - 5) + 'px';
                                    seat.style.width = (seatScale - 5) + 'px';

                                    let label = document.createElement('p');
                                    label.textContent = String.fromCharCode(r + 64) + c;
                                    label.classList.add("label2");

                                    seat.appendChild(label);
                                    venue_canvas_2.appendChild(seat);
                                }
                            }
                        }

                        for (let r = 0; r < blocks.length; r++) {
                            let top1, left1;
                            if (blocks[r].seatList) {
                                let result = parseString(blocks[r].seatList);
                                let start = parseInt(result.firstLetter.charCodeAt(0) - 64) - 1;
                                let len = result.length;

                                let block = document.createElement('div');
                                block.classList.add("block");
                                block.style.border = '1px solid' + colorsList[r];
                                block.style.backgroundColor = hexToRGBA(colorsList[r], 0.25);

                                if (blocks[r].layoutSide === 'sideLeft') {
                                    top1 = (seatScale + 5) * start - 4;
                                    left1 = -7;
                                    block.style.width = (seatScale) * ncL + 'px';
                                } else if (blocks[r].layoutSide === 'center') {
                                    top1 = (seatScale + 5) * start - 4;
                                    left1 = seatScale * (ncL + 1) - 7;
                                    block.style.width = (seatScale) * ncC + 'px';
                                } else if (blocks[r].layoutSide === 'sideRight') {
                                    top1 = (seatScale + 5) * start - 4;
                                    left1 = seatScale * (ncL + ncC + 2) - 7;
                                    block.style.width = (seatScale) * ncR + 'px';
                                }

                                block.style.top = Math.round(top1) + 'px';
                                block.style.left = Math.round(left1) + 'px';
                                block.style.height = ((seatScale + 3) * len) + 'px';

                                venue_canvas_2.appendChild(block);

                            } else {
                                console.log('SeatList is missing for block', blocks[r].blockName);
                            }
                        }
                        document.getElementById("seatsDisplay_2").style.height = (seatScale * nrT + 10) + 'px';
                        document.getElementById("seatsDisplay_2").appendChild(venue_canvas_2);
                        document.getElementById("seatsDisplay_2").style.display = "block";
                        document.getElementById("borderID_2").style.display = "block";
                        document.getElementById("formRowID_2").style.display = "block";


                        // REMAINING SEATS (AVAILABLE TO BUY)
                        for (let i = 0; i < availSeats.length; i++) {
                            let availSeat = availSeats[i];
                            let top, left;

                            if (availSeat.layoutSide === 'sideLeft') {
                                top = (seatScale + 5) * (availSeat.row.charCodeAt(0) - 64) - (seatScale + 5);
                                left = seatScale * parseInt(availSeat.column) - (seatScale + 5);
                            } else if (availSeat.layoutSide === 'center') {
                                top = (seatScale + 5) * (availSeat.row.charCodeAt(0) - 64) - (seatScale + 5);
                                left = seatScale * (parseInt(availSeat.column) + ncL + 1) - (seatScale + 5);
                            } else if (availSeat.layoutSide === 'sideRight') {
                                top = (seatScale + 5) * (availSeat.row.charCodeAt(0) - 64) - (seatScale + 5);
                                left = seatScale * (parseInt(availSeat.column) + ncL + ncC + 2) - (seatScale + 5);
                            }
                            let seat = document.createElement('div');
                            seat.style.border = '1px solid blue';
                            seat.classList.add("seat");
                            seat.style.top = top + 'px';
                            seat.style.left = left + 'px';
                            seat.style.height = (seatScale - 5) + 'px';
                            seat.style.width = (seatScale - 5) + 'px';

                            venue_canvas_2.appendChild(seat);
                        }
                        document.getElementById("seatsDisplay_2").appendChild(venue_canvas_2);


                        // KEY DISPLAY
                        let venue_canvas_3 = document.createElement('div');
                        venue_canvas_3.style.position = 'relative';

                        let label_remaining = document.createElement('label');
                        label_remaining.textContent = "Remaining Seats";
                        label_remaining.style.position = 'absolute';
                        label_remaining.style.left = '0px';
                        label_remaining.style.textAlign = "left";
                        venue_canvas_3.appendChild(label_remaining);

                        let label_sold = document.createElement('label');
                        label_sold.textContent = "Sold Seats";
                        label_sold.style.position = 'absolute';
                        label_sold.style.right = '0px';
                        label_sold.style.textAlign = "right";
                        venue_canvas_3.appendChild(label_sold);

                        document.getElementById("seatsDisplay_3").appendChild(venue_canvas_3);


                        let seat = document.createElement('div');
                        seat.style.border = '1px solid blue';
                        seat.style.left = '115px';
                        seat.classList.add("seat");

                        venue_canvas_3.appendChild(seat);

                        let seat_2 = document.createElement('div');
                        seat_2.style.border = '1px solid red';
                        seat_2.style.right = '75px';
                        seat_2.classList.add("seat");

                        venue_canvas_3.appendChild(seat_2);

                        document.getElementById("seatsDisplay_3").appendChild(venue_canvas_3);


                        document.getElementById("seatsDisplay_3").style.display = "block";
                        document.getElementById("borderID_3").style.display = "block";
                        document.getElementById("formRowID_3").style.display = "block";

                    } else {
                        document.getElementById("Error10").textContent = "";
                        let responseBody = JSON.parse(data.body);
                        let errorMessage = responseBody.Error;
                        document.getElementById("Error10").textContent = errorMessage;
                        document.getElementById("borderID_1").style.display = "none";
                        document.getElementById("formRowID_1").style.display = "none";
                        document.getElementById("borderID_2").style.display = "none";
                        document.getElementById("formRowID_2").style.display = "none";
                        document.getElementById("borderID_3").style.display = "none";
                        document.getElementById("formRowID_3").style.display = "none";
                        document.getElementById("borderID_4").style.display = "none";
                        document.getElementById("formRowID_4").style.display = "none";
                    }
                })
                .catch(error => {
                    document.getElementById("Error10").textContent = "Network error: " + error.message;
                });

            fetch("https://j1hi3b3hbg.execute-api.us-east-1.amazonaws.com/seats4uStage/listBlocks", {
                method: "POST",
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.statusCode === 200) {
                        document.getElementById("Error10").textContent = '';

                        let list = document.createElement('ul');

                        for (let x = 0; x < data.body.length; x++) {

                            list.style.listStyleType = 'none'; // Remove bullet points
                            list.style.padding = '0'; // Remove default padding

                            let listItem = document.createElement('li'); // Changed from 'p' to 'li'
                            listItem.style.border = '1px solid #ddd'; // Add border to each item
                            listItem.style.marginBottom = '10px'; // Space between items

                            let blockName = document.createElement('p');
                            blockName.textContent = "Block Name: " + data.body[x].blockName;

                            let attr = document.createElement('p');
                            attr.textContent = "Section: " + data.body[x].layoutSide;
                            blockName.appendChild(attr);

                            let attr_2 = document.createElement('p');
                            attr_2.textContent = "Row(s): " + data.body[x].seatList;
                            blockName.appendChild(attr_2);

                            let attr_3 = document.createElement('p');
                            attr_3.textContent = "Price: $" + parseFloat(data.body[x].Price);
                            blockName.appendChild(attr_3);

                            listItem.appendChild(blockName);
                            list.appendChild(listItem);
                        }

                        document.getElementById("Error10").appendChild(list);
                    } else {
                        let responseBody = JSON.parse(data.body);

                        let errorMessage = responseBody.Error || "Unknown error";

                        document.getElementById("Error10").textContent = errorMessage;
                    }
                })
                .catch(error => {
                    document.getElementById("Error10").textContent = "Network error: " + error.message;

                });

            document.getElementById("listblockshowname").value = '';
            document.getElementById("managerpass9").value = '';

            document.getElementById("seatsDisplay").innerHTML = '';
            document.getElementById("seatsDisplay_2").innerHTML = '';
            document.getElementById("seatsDisplay_3").innerHTML = '';
            document.getElementById("seatsDisplay_4").innerHTML = '';
            document.getElementById("seatsDisplay").style.display = "none";
            document.getElementById("seatsDisplay_2").style.display = "none";
            document.getElementById("seatsDisplay_3").style.display = "none";
            document.getElementById("seatsDisplay_4").style.display = "none";
        }

    </script>


    <link rel="stylesheet" href="Layout.css">

    <div class="App">

        <header class="App-header">
            <img class="seats4u" src='https://seats4you.s3.amazonaws.com/Seats4u.png'></img>
        </header>
        <div class="formContainer">

            <div class="formColumn">
                <div class="formRow">
                    <a href="https://seats4you.s3.amazonaws.com/form1.html">
                        <button class="clickButton">Back</button>
                    </a>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Name Your Venue" id="venuecreatename" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Location:</label>
                        <input placeholder="Enter Venue Location" id="venuelocation" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Create a Venue Password" id="managerpass" type="password" class="input" />
                    </div>
                    <div class="formRow">
                        <div class="label">Start Row Column Left:</div>
                        <input placeholder="A1" class="input" readonly />
                        <label class="label">End Row Column Left:</label>
                        <input placeholder="Enter seat ID: LetterNumber" id="endrowcolL" class="input" />
                    </div>
                    <div class="formRow">
                        <div class="label">Start Row Column Center:</div>
                        <input placeholder="A1" class="input" readonly />
                        <label class="label">End Row Column Center:</label>
                        <input placeholder="Enter seat ID: LetterNumber" id="endrowcolC" class="input" />
                    </div>
                    <div class="formRow">
                        <div class="label">Start Row Column Right:</div>
                        <input placeholder="A1" class="input" readonly />
                        <label class="label">End Row Column Right:</label>
                        <input placeholder="Enter seat ID: LetterNumber" id="endrowcolR" class="input" />
                    </div>
                    <button class="createVenueButton" onClick=CreateVenue(event)>Create Venue</button>
                    <div id="Error2"></div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Enter Venue Name" id="venuedeletename" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass2" type="password" class="input" />
                    </div>
                    <button class="deleteVenueButton" onClick=DeleteVenue(event)>Delete Venue</button>
                    <div id="Error"></div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Enter Venue Name" id="venuegeneratename" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass6" type="password" class="input" />
                    </div>
                    <button class="VMgenerateShowsReportButton" onClick=VMGenerateShowsReport(event)>Generate Shows
                        Report</button>
                    <div id="Error12"></div>
                </div>
            </div>
            <div class="formColumn">
                <div class="border">
                    <div class="formRow">
                        <label class="label">Show Name:</label>
                        <input placeholder="Name Your Show" id="showname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Venue Name:</label>
                        <input placeholder="Enter Venue Name" id="venuenamecreateshow" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Date:</label>
                        <input id="date" class="input" type="date" />
                    </div>
                    <div class="formRow">
                        <label class="label">Time:</label>
                        <input type="time" id="time" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Price:</label>
                        <input placeholder="Enter Show Price" id="price" class="input" type="number" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="showcreatepass" type="password" class="input" />
                    </div>
                    <button class="createShowButton" onClick=CreateShow(event)>Create Show</button>
                    <div id="Error4"></div>
                    <div id="Error41"></div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Enter Show Name" id="showdeletename" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass3" type="password" class="input" />
                    </div>
                    <button class="deleteShowButton" onClick=DeleteShow(event)>Delete Show</button>
                    <div id="Error5"></div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Enter Venue Name" id="showlistname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass4" type="password" class="input" />
                    </div>
                    <div class="formRow">
                        <button class="listShowsButton" onClick=ListShows(event)>List Shows</button>
                        <div id="Error6"></div>
                    </div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Enter Show Name" id="activateshowname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass5" type="password" class="input" />
                    </div>
                    <div class="formRow">
                        <button class="activateShowButton" onClick=ActivateShow(event)>Activate Show</button>
                        <div id="Error7"></div>
                    </div>
                </div>
            </div>
            <div class="formColumn">
                <div class="border">
                    <div class="formRow">
                        <label class="label">Show Name:</label>
                        <input placeholder="Enter Show Name" id="createblockshowname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Block Name:</label>
                        <input placeholder="Enter Block Name" id="createblockname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Row(s):</label>
                        <input placeholder="Enter Row(s)" id="createblockrows" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Layout Section:</label>

                        <select class="input" name="Enter Layout Section" id="createblocklayoutsection">
                            <option value="sideLeft">Side Left</option>
                            <option value="center">Center</option>
                            <option value="sideRight">Side Right</option>
                        </select>

                    </div>
                    <div class="formRow">
                        <label class="label">Price:</label>
                        <input placeholder="Enter Price" id="createblockprice" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass7" type="password" class="input" />
                    </div>
                    <div class="formRow">
                        <button class="createBlockButton" onClick=CreateBlock(event)>Create Block</button>
                        <div id="Error13"></div>
                    </div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Show Name:</label>
                        <input placeholder="Enter Show Name" id="deleteblockshowname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Block Name:</label>
                        <input placeholder="Enter Block Name" id="deleteblockname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass8" type="password" class="input" />
                    </div>
                    <div class="formRow">
                        <button class="deleteBlockButton" onClick=DeleteBlock(event)>Delete Block</button>
                        <div id="Error9"></div>
                    </div>
                </div>
                <div id="borderID_4" class="border_2">
                    <div id="formRowID_4" class="formRow_2">
                        <div id="seatsDisplay_4" class="display"></div>
                    </div>
                </div>
                <div id="borderID_1" class="border_2">
                    <div id="formRowID_1" class="formRow_2">
                        <div id="seatsDisplay" class="display"></div>
                    </div>
                </div>
                <div id="borderID_2" class="border_2">
                    <div id="formRowID_2" class="formRow_2">
                        <div id="seatsDisplay_2" class="display"></div>
                    </div>
                </div>
                <div id="borderID_3" class="border_2">
                    <div id="formRowID_3" class="formRow_2">
                        <div id="seatsDisplay_3" class="display"></div>
                    </div>
                </div>

                <div class="border">
                    <div class="formRow">
                        <label class="label">Show Name:</label>
                        <input placeholder="Enter Show Name" id="listblockshowname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Venue Password" id="managerpass9" type="password" class="input" />
                    </div>
                    <div class="formRow">
                        <div id="Error12"></div>
                        <button class="listBlockButton" onClick=ListBlocks(event)>List Blocks</button>
                        <div id="Error10"></div>
                    </div>
                </div>
            </div>
            <div class="formColumn">
                <div class="border">
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Admin Password" id="adminpass" type="password" class="input" />
                    </div>
                    <button class="listVenuesButton" onClick=ListVenues(event)>List Venues</button>
                    <div id="Error3"></div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Enter Show Name" id="deleteshowaname" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Admin Password" id="adminpass2" type="password" class="input" />
                    </div>
                    <button class="deleteShowAButton" onClick=DeleteShowA(event)>Delete Show</button>
                    <div id="Error8"></div>
                </div>
                <div class="border">
                    <div class="formRow">
                        <label class="label">Name:</label>
                        <input placeholder="Enter Venue Name" id="GenerateShowsName" class="input" />
                    </div>
                    <div class="formRow">
                        <label class="label">Password:</label>
                        <input placeholder="Enter Admin Password" id="adminpass3" type="password" class="input" />
                    </div>
                    <button class="generateShowsReportButton" onClick=GenerateShowsReport(event)>Generate Shows
                        Report</button>
                    <div id="Error11"></div>
                </div>
            </div>
        </div>
        </header>
    </div>

</body>

</html>